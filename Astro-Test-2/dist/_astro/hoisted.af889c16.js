import{C as J}from"./index.fccfb502.js";function a(m,y=document){if(typeof m=="function")document.addEventListener("load",m);else return y.querySelector(m)}function V(m,y=document){return y.querySelectorAll(m)}function M(m,y,S){if(m instanceof Date){var r=new Date(m),k=function(){r.getDate()!=m.getDate()&&r.setDate(0)};switch(String(y).toLowerCase()){case"year":r.setFullYear(r.getFullYear()+S),k();break;case"quarter":r.setMonth(r.getMonth()+3*S),k();break;case"month":r.setMonth(r.getMonth()+S),k();break;case"week":r.setDate(r.getDate()+7*S);break;case"day":r.setDate(r.getDate()+S);break;case"hour":r.setTime(r.getTime()+S*36e5);break;case"minute":r.setTime(r.getTime()+S*6e4);break;case"second":r.setTime(r.getTime()+S*1e3);break;default:r=void 0;break}return r}}function G(m,y){return J.AES.decrypt(m,y).toString(J.enc.Utf8)}try{let P=function(e,n=8,u=30,s=0,o=0){const t=S?.indexOf(e);if(t===-1)throw new Error("Invalid day of week");const l=new Date;return l.setDate(l.getDate()+(7+t-l.getDay())%7),l.setHours(n),l.setMinutes(u),l.setSeconds(s),l.setMilliseconds(o),l},R=function(e){if(!e)return new Date;const n=e.match(/\*(-)?Infinity\*/);if(n)return n[1]?new Date(-864e13):y;if(e.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{1,2}):(\d{2})(:\d{2})?([APap][mM])?/)){const[u,s,o,t,l,c,d,i]=e.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{1,2}):(\d{2})(:\d{2})?([APap][mM])?/),h=i===void 0?l:l==="12"?i.toLowerCase()==="pm"?"12":"0":i.toLowerCase()==="pm"?+l+12:l;return new Date(s,o-1,t,h,c,d?.replace(":","")??0)}else if(e.match(/^([A-Z][a-z]*) (\d{1,2}):(\d{2})(:\d{2})?([APap][mM])?/)){const[u,s,o,t,l,c]=e.match(/^(\w+) (\d{1,2}):(\d{2})(:\d{2})?([APap][mM])?/),d=c===void 0?o:o==="12"?c.toLowerCase()==="pm"?"12":"0":c.toLowerCase()==="pm"?+o+12:o;let i;switch(s){case"Su":case"Sun":i="Sunday";break;case"M":case"Mon":i="Monday";break;case"Tu":case"Tue":i="Tuesday";break;case"W":case"Wed":i="Wednesday";break;case"Th":case"Thu":i="Thursday";break;case"F":case"Fri":i="Friday";break;case"Sa":case"Sat":i="Saturday";break;default:i=s}switch(i){case"Sunday":case"Monday":case"Tuesday":case"Wednesday":case"Thursday":case"Friday":case"Saturday":return P(i,d,t,l?.replace(":","")??0);default:throw new Error("Invalid day of week")}}else throw new Error(`Invalid string format: "${e}"`)},z=function(e){const n=Date.now()-e.lastCheckTime;return e.lastCheckTime=Date.now(),n},U=function(e){const{settings:n,boxData:u}=JSON.parse(e),s=localStorage.getItem("management_key");localStorage.clear(),s&&localStorage.setItem("management_key",s);for(let o=0;o<r.length;o++){const t=r[o];a(".title",t).value="CLEAR",t.UpdateBox()}localStorage.setItem("settings",JSON.stringify(n)),Object.entries(n).forEach(([o,t])=>{n[o]=t}),Object.entries(u).forEach(([o,t])=>{const l=a("#box-container").children[+o.match(/\d+/)].matches(".box")?a("#box-container").children[+o.match(/\d+/)]:void 0;if(o.startsWith("box-")&&localStorage.setItem(o,JSON.stringify(t)),l){const{title:c="",data:d="",prefix:i="",tickTime:h=""}=t;a(".title",l).value=c,a("textarea",l).value=d,a(".prefix",l).value=i,a(".local-tick-time",l).value=h,l.UpdateBox()}})},I=function(){const e={};for(let n=0;n<r.length;n++){const u=`box-${n+1}`,s=localStorage.getItem(u);if(s!==null){const o=JSON.parse(s);o.title!==""&&(e[u]=o)}}return JSON.stringify({settings:T,boxData:e})},L=function(e=!1){e:for(let o=0;o<r.length;o++){const t=r[o],l=t.getAttribute("titleValue");if(!l||l.match(/\*PAUSE\*/i))continue e;const c=+t.tickTime;if(!(c===0||isNaN(c)))if(isNaN(t.currentTick)&&(t.currentTick=0),t.currentTick+=z(t),e||t.currentTick==null||t.currentTick>=c)t.currentTick=t.currentTick%c;else continue e;t.values?.forEach(i=>{i.millisecondsUntil=i.date.getTime()-Date.now()});let d=null;for(let i=0;i<t.values.length;i++){const h=t.values[i];h.millisecondsUntil>=0?(d==null||h.millisecondsUntil<d.millisecondsUntil)&&(d=h):(l.match(/\*ALARM\*/i)||h.text.match(/\*ALARM\*/i))&&h.alarm===!1&&e===!1&&(O.play().catch(w=>{console.error(w)}),h.alarm=!0,console.log(h.alarm))}if(t.upcomingDate=d,t.upcomingDate){const i=new Date(t.upcomingDate.millisecondsUntil),h=i.toISOString(),w=((+h.slice(8,10)-1)*24+i.getUTCHours()).toString().padStart(2,"0");if(t.highlightMatches){const[D,f=0,x=0,b=0,v=0,N=0]=t.highlightMatches;+f*864e5+ +x*36e5+ +b*6e4+ +v*1e3+ +N>=t.upcomingDate.millisecondsUntil?t.classList.add("box-highlight"):t.classList.remove("box-highlight")}else t.classList.remove("box-highlight");t.specialElements.timerHrMin.innerText=w+":"+i.getUTCMinutes().toString().padStart(2,"0"),t.specialElements.timerSec.innerText=h.slice(17,T.secondsSize);const C=t.upcomingDate.text.match(/\*dis(?:play)? ?\((.*?)\)\*/);let p=C?C[1]:t.upcomingDate.text;if(/^([A-Z][a-z]*) (\d{1,2}):(\d{2})(:\d{2})?([APap][mM])?/.test(p))switch(!0){case t.settings.dayOfWeek==="hide":case!!p.match(/\*(h-dow|h-d)\*/):p=p.replace(/^([A-Z][a-z]* )/,"").replace(/\*(h-dow|h-d)\*/,"");break;case t.settings.dayOfWeek==="shorten3":case!!p.match(/\*(sh3-dow)\*/):p=p.replace(/^([A-Z][a-z]*)/,D=>D.substring(0,3)).replace(/\*(sh3-dow)\*/,"");break;case t.settings.date==="hide":case!!p.match(/\*(h-date|h-d)\*/):p=p.replace(/^(\d{4})-(\d{2})-(\d{2}) /,"").replace(/\*(h-date|h-d)\*/,"");break}t.specialElements.nextUp.innerHTML=p}else t.specialElements.timerHrMin.innerText="00:00",t.specialElements.timerSec.innerText="00.000",t.specialElements.nextUp.innerHTML='<span onmousedown="alert(`All upcoming dates have elapsed`)" ontouchstart>undefined</span>',t.classList.remove("box-highlight")}const n=a('.box[fake-title-value="Default"]'),s=a(".box-highlight")??n;s?(k.style.display="block",E.title.innerText=s.fakeTitleValue,E.timerHrMin.innerText=s.specialElements.timerHrMin?.innerText,E.timerSec.innerText=s.specialElements.timerSec?.innerText,E.nextUp.innerText=s.specialElements.nextUp?.innerText,E.data.innerText=s?.allData?.data,E.prefix.innerText=s?.allData?.prefix||"No Prefix"):k.style.display="none"};const y=new Date(Date.now()+26784e5-1),S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=[...V(".box")],k=a(".greater-box"),O=new Audio("https://duckduckgo.com/share/goodie/timer/2001/alarm.mp3"),E={title:a(".greater-title",k),timerHrMin:a("span.timer-hr-min",k),timerSec:a("span.timer-sec",k),nextUp:a(".next-up",k),data:a(".greater-data",k),prefix:a(".greater-prefix",k)},T={cooldown:+(JSON.parse(localStorage.getItem("settings")??'{"cooldown":10}').cooldown??"10"),highlightColor:JSON.parse(localStorage.getItem("settings")??'{"highlightColor":"yellow"}').highlightColor??"yellow",customClickSound:JSON.parse(localStorage.getItem("settings")??'{"customClickSound":""}').customClickSound??"",secondsSize:+(JSON.parse(localStorage.getItem("settings")??'{"secondsSize":23}').secondsSize??23)},H=/\/\/.*|\/\*[^]*?\*\//g,A=new Audio(T.customClickSound||"https://cdn.videvo.net/videvo_files/audio/premium/audio0051/watermarked/ButtonSolidCompute%20SE040304_preview.mp3");a("button#ie-export").addEventListener("click",e=>{console.log(I());try{navigator.clipboard.writeText(I())}catch{a(".import-export-box > .ie-data").value=I()}}),a("button#ie-import").addEventListener("click",e=>{U(a(".import-export-box > .ie-data").value)});for(let e=0;e<r.length;e++){const n=r[e],u={title:a(".title",n),timerHrMin:a("span.timer-hr-min",n),timerSec:a("span.timer-sec",n),nextUp:a(".next-up",n),data:a("textarea",n),prefix:a(".prefix",n),localTickTime:a(".local-tick-time",n)};n.specialElements=u}if(r.forEach(e=>{const n=Array.from(e.parentNode.children).indexOf(e),u=JSON.parse(localStorage.getItem(`box-${n}`));a("button",e).addEventListener("click",o=>{if(a(".title",e).value=="REMOVE"){e.remove();return}s(),L(!0),A.play()}),u&&(a(".title",e).value=u.title,a("textarea",e).value=u.data,a("input.prefix",e).value=u.prefix,a(".local-tick-time",e).value=u.tickTime??0);function s(){const[o,t,l,c,d="none"]=[a(".title",e),a("textarea",e),a("input.prefix",e),a(".local-tick-time",e),a("#quick-options-select")?.value];let i=d==="removeTitle"?"*NIL*":d==="clear"?"*CLEAR*":o.value;if(console.log(d,i),!i&&d==="none")return;switch(i){case"NIL":case"*NIL*":case"NULL":case"*NULL*":[i,o.value]=["",""];break;case"CLEAR":case"*CLEAR*":case"RESET":case"*RESET*":[i,o.value,t.value,l.value,c.value]=["","","","",""];break;default:break}const h=(f,x,b,v,N)=>{let g=new Date;if(x)switch(N){case"s":g=M(g,"second",b==="-"?-+v:+v);break;case"m":g=M(g,"minute",b==="-"?-+v:+v);break;case"h":g=M(g,"hour",b==="-"?-+v:+v);break;case"d":g=M(g,"day",b==="-"?-+v:+v);break;default:break}return`${g.getFullYear().toString().padStart(2,"0")}-${(g.getMonth()+1).toString().padStart(2,"0")}-${g.getDate().toString().padStart(2,"0")} ${g.getHours()}:${g.getMinutes().toString().padStart(2,"0")}:${g.getSeconds().toString().padStart(2,"0")}.${g.getMilliseconds().toString().padStart(4,"0")}`};t.value=t.value.replace(/\*now(([+-])(\d+)([smhd]))?\*/g,h);const w=JSON.stringify({title:i.replace(/\*COPY\*/,""),data:t.value,prefix:l.value,tickTime:c.value});e.allData=JSON.parse(w),localStorage.setItem(`box-${n}`,w);function C(f){let x=JSON.parse(f);localStorage.setItem(`box-${n}`,f),o.value=x.title,t.value=x.data,l.value=x.prefix,c.value=x.tickTime,i=x.title}if(i.match(/\*COPY\*/i)||d==="copy")try{navigator.clipboard?navigator.clipboard.writeText(w):(t.value=w,o.value="*PASTE*")}catch(f){console.log(f),t.value=w,alert(f)}else if(i.match(/\*PASTE\*/i)||i===".p"||d==="paste")try{C(t.value)}catch(f){console.log(f),alert(`Invalid Paste: ${f}`)}else d==="pasteFromImportBox"&&a(".ie-data")&&C(a(".ie-data").value);e.settings={dayOfWeek:/\*(h-dow|h-d)\*/.test(i)?"hide":/\*(sh3-dow)\*/.test(i)?"shorten3":/\*(sh-dow|sh-d)\*/.test(i)?"shorten":null,date:/\*(h-date|h-d)\*/.test(i)?"hide":/\*(sh-date|sh-d)\*/.test(i)?"shorten":null};let p=[];t.value.replace(H,"").split(`
`).forEach((f,x)=>{let b=a(".prefix",e).value+f,v=R(b);p[x]={text:b,date:v,alarm:!1}}),e.values=p;const D=i.match(/\*(?:(\d+)d)?(\d+)?:(\d+)?(?::(\d+))?(?:\.(\d+))?\*/);D&&D[0]!=":"?e.highlightMatches=D:e.highlightMatches=void 0,e.setAttribute("titleValue",i),e.setAttribute("fake-title-value",i.replace(/\*.*?\*/g,"")),e.fakeTitleValue=e.getAttribute("fake-title-value"),e.tickTime=c.value===""?0:c.value,e.lastCheckTime=Date.now()}s(),e.UpdateBox=s}),location.pathname==="/mtu"||location.pathname==="/mtu/"){localStorage.getItem("management_key")||localStorage.setItem("management_key",prompt("Insert your key"));try{const e=G(String.raw`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`,`${localStorage.getItem("management_key")}+uoHNBzi2MdUF9Nq3CpAvUpW6qMi2ZAm5OvmWJGXGlHnk9TNHsaDILbLibfR9ZU24vbEFvx43aQ8p8DL9JPHmrhaQza5ixsI5wk8yChCyhnfz0BfCpO3cRicvuFUS8bIJ`),n=JSON.parse(e);if(n.settings&&n.boxData)U(e);else throw new Error("Invalid key")}catch{localStorage.setItem("management_key",prompt("Invalid key: Insert the correct key")),location.reload()}}const W=setInterval(L,T.cooldown);L(!0),document.addEventListener("click",e=>{e.target.matches("#deactivate")&&(A.play(),confirm("WARNING: This will make this page unavailable until this site is reload. Confirm?")&&(clearInterval(W),document.body.remove(),document.head.remove())),e.target.matches(".settings-box-update")&&(localStorage.setItem("settings",JSON.stringify({cooldown:a(".settings-box .cooldown").value||"10",secondsSize:+a(".settings-box .seconds-size").value+19||23,highlightColor:a(".settings-box .highlight-color").value||"yellow",customClickSound:a(".settings-box .custom-click-sound").value||""})),A.play(),location.reload())}),a(".settings-box .cooldown").value=T.cooldown,a(".settings-box .seconds-size").value=T.secondsSize-19,a(".settings-box .highlight-color").value=T.highlightColor,a(".settings-box .custom-click-sound").value=T.customClickSound,document.documentElement.style.setProperty("--highlight-color",T.highlightColor)}catch(m){window.err=m,alert(m),console.error(m)}
